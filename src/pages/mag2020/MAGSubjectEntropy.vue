<template lang="pug">
v-container(fluid)
  v-row
    v-col(cols='8')
      v-select(v-model='option.subject.select', :items='option.subject.opt', small-chips, multiple, deletable-chips, clearable, label='目标学科', @change='getData')
    v-col(cols='2')
      v-select(v-model='option.type.select', :items='option.type.opt', label='数据维度', @click='getData').
  v-row(v-for='chartid of myChartIds', :key='chartid')
    v-col(col='12')
      v-card.mx-auto(outlined, :loading='loading', height='70vh')
        v-container(:id='chartid', fluid, fill-height).

  v-row
    v-col
      comment(storagekey='MAG Subject 熵_chart_1').

</template>

<script>

import MAGSubjectEntropyObject from '@/assets/data/MAGSubjectEntropy.json'

import { extendEchartsOpts, extendLineSeries } from '@/api/data'

import Base from '@/utils/base'
import comment from '@/components/comment'
import _ from 'lodash'

function formatNum(value) {
  if (!value && value !== 0) return 0
  const str = value.toString()
  const reg = str.indexOf('.') > -1 ? /(\d)(?=(\d{3})+\.)/g : /(\d)(?=(?:\d{3})+$)/g
  return str.replace(reg, '$1,')
}

export default {
  name: 'MAGSubjectEntropy',
  components: {
    comment
  },
  extends: Base,
  data() {
    return {
      pageName: 'MAG subject entropy',
      option: {
        subject: {
          select: ['Biology', 'Chemistry', 'Computer science', 'Engineering disciplines', 'Environmental science', 'Geology',
            'Materials science', 'Mathematics', 'Philosophy', 'Physics', 'Political science', 'Psychology', 'Sociology', 'MAG'],
          opt: ['Biology', 'Chemistry', 'Computer science', 'Engineering disciplines', 'Environmental science', 'Geology',
            'Materials science', 'Mathematics', 'Philosophy', 'Physics', 'Political science', 'Psychology', 'Sociology', 'MAG']
        },
        type: {
          select: 'a',
          opt: [
            { text: 'linksin', value: 'i' },
            { text: 'linksout', value: 'o' },
            { text: '无向网络', value: 'a' }
          ]
        }
      },
      loading: false,
      myChartIds: ['subjectChart1', 'subjectChart2', 'subjectChart3', 'subjectChart4']
    }
  },
  computed: {
  },
  watch: {
  },
  mounted() {
    //
    MAGSubjectEntropyObject['MAG'] = {
      'd_i': [1.6904, 1.7298, 1.7741, 1.8156, 1.8604, 1.8873, 1.9207, 1.951, 1.9859, 2.0072, 2.0244, 2.084, 2.1117, 2.1307, 2.1415, 2.1398, 2.1412, 2.144, 2.1525, 2.1625, 2.1748, 2.1917, 2.2119, 2.234, 2.2591, 2.2844, 2.3173, 2.3509, 2.3916, 2.4317, 2.4755, 2.5156, 2.5477, 2.5814, 2.6082, 2.6317, 2.6594, 2.6864, 2.713, 2.7377, 2.7607, 2.7792, 2.7984, 2.8122, 2.8204, 2.8279, 2.8352, 2.8476, 2.8629, 2.8805, 2.9069, 2.9304, 2.9568, 2.9868, 3.0136, 3.0489, 3.0816, 3.1125, 3.1459, 3.1783, 3.2127, 3.2466, 3.2819, 3.3189, 3.3592, 3.3976, 3.4355, 3.4761, 3.5153, 3.5548, 3.5856, 3.6224, 3.6592, 3.6957, 3.7347, 3.7722, 3.804, 3.8385, 3.8747, 3.9097, 3.9435, 3.9762, 4.0089, 4.0394, 4.0695, 4.0983, 4.1254, 4.1497, 4.1753, 4.2011, 4.2268, 4.2525, 4.2779, 4.2993, 4.3201, 4.3439, 4.3676, 4.3939, 4.4231, 4.4538, 4.4857, 4.52, 4.5568, 4.5963, 4.6356, 4.6778, 4.7216, 4.7639, 4.804, 4.8426, 4.8784, 4.9148, 4.9508, 4.9836, 5.0125, 5.04, 5.0654, 5.0896, 5.1061, 5.123, 5.1397],
      'd_o': [2.5689, 2.6125, 2.6814, 2.7289, 2.7695, 2.7998, 2.8335, 2.8661, 2.9073, 2.9322, 2.9621, 3.0084, 3.0424, 3.0758, 3.1032, 3.1158, 3.1253, 3.1369, 3.1477, 3.1648, 3.1859, 3.2127, 3.2396, 3.2632, 3.2851, 3.3154, 3.357, 3.3956, 3.4375, 3.478, 3.5156, 3.5504, 3.5837, 3.6142, 3.6353, 3.6561, 3.68, 3.703, 3.7284, 3.7539, 3.7756, 3.7957, 3.8124, 3.825, 3.8344, 3.841, 3.846, 3.8563, 3.87, 3.887, 3.9086, 3.9294, 3.9497, 3.9695, 3.9925, 4.0191, 4.0425, 4.0664, 4.0893, 4.1142, 4.1406, 4.1653, 4.1907, 4.2175, 4.2451, 4.272, 4.2992, 4.3281, 4.3566, 4.3849, 4.4025, 4.4261, 4.4483, 4.4726, 4.5019, 4.5315, 4.5618, 4.5923, 4.6231, 4.6545, 4.6851, 4.7161, 4.7468, 4.7762, 4.8051, 4.8328, 4.8604, 4.8856, 4.9095, 4.9346, 4.96, 4.9866, 5.013, 5.0376, 5.0623, 5.0898, 5.1172, 5.1459, 5.1769, 5.2101, 5.243, 5.2762, 5.3111, 5.3472, 5.3824, 5.4191, 5.4558, 5.4919, 5.5293, 5.5668, 5.5999, 5.6366, 5.6745, 5.7115, 5.7455, 5.7792, 5.8106, 5.8442, 5.8738, 5.9074, 5.9325],
      'd_a': [2.3577, 2.4023, 2.451, 2.4951, 2.5399, 2.5716, 2.6087, 2.6423, 2.6797, 2.7029, 2.7204, 2.7631, 2.793, 2.8149, 2.8298, 2.8303, 2.8335, 2.8369, 2.8428, 2.8525, 2.8651, 2.8824, 2.9018, 2.9231, 2.9472, 2.9749, 3.0114, 3.0461, 3.0868, 3.1265, 3.1704, 3.2101, 3.2456, 3.2829, 3.3127, 3.3412, 3.3741, 3.4047, 3.4363, 3.4663, 3.4926, 3.5151, 3.5365, 3.5523, 3.5633, 3.5717, 3.5797, 3.593, 3.609, 3.6291, 3.6568, 3.6836, 3.7119, 3.7431, 3.7737, 3.8105, 3.8441, 3.8782, 3.9131, 3.9479, 3.9842, 4.0211, 4.0597, 4.1001, 4.1436, 4.1862, 4.2287, 4.273, 4.3167, 4.3601, 4.3896, 4.4258, 4.4611, 4.498, 4.5385, 4.578, 4.6149, 4.6535, 4.6934, 4.7327, 4.7708, 4.8085, 4.8462, 4.8819, 4.9167, 4.9501, 4.9823, 5.0113, 5.04, 5.0698, 5.1001, 5.1313, 5.1619, 5.1891, 5.2149, 5.2434, 5.2719, 5.3032, 5.3374, 5.3747, 5.4119, 5.4505, 5.4914, 5.535, 5.5779, 5.6235, 5.6698, 5.7155, 5.7607, 5.8058, 5.8457, 5.8887, 5.9329, 5.9752, 6.0141, 6.0528, 6.0895, 6.1275, 6.1579, 6.1881, 6.2109],
      'E_i': [0.97523, 0.974592, 0.974262, 0.973901, 0.973491, 0.973061, 0.972835, 0.972534, 0.972114, 0.971814, 0.971694, 0.971712, 0.971411, 0.971136, 0.970885, 0.970782, 0.970745, 0.970691, 0.970535, 0.970464, 0.970267, 0.969995, 0.969732, 0.969349, 0.969015, 0.968619, 0.967971, 0.96749, 0.966959, 0.966269, 0.965699, 0.965207, 0.964838, 0.96436, 0.964152, 0.963871, 0.963566, 0.963238, 0.963024, 0.962783, 0.962559, 0.962405, 0.962233, 0.962152, 0.962067, 0.962033, 0.962002, 0.961918, 0.961815, 0.961603, 0.961293, 0.960969, 0.96059, 0.960202, 0.959854, 0.95937, 0.958882, 0.958343, 0.957831, 0.957215, 0.956576, 0.955952, 0.955348, 0.954774, 0.954057, 0.953281, 0.952499, 0.951763, 0.951048, 0.950338, 0.949539, 0.948764, 0.948027, 0.947362, 0.94675, 0.946199, 0.945632, 0.945164, 0.944713, 0.944235, 0.94379, 0.943366, 0.94298, 0.942641, 0.942314, 0.941993, 0.941662, 0.941314, 0.940978, 0.940631, 0.940311, 0.940019, 0.939685, 0.939384, 0.93912, 0.938858, 0.938583, 0.938302, 0.938017, 0.937713, 0.937437, 0.937187, 0.936927, 0.936658, 0.936356, 0.936044, 0.935664, 0.935239, 0.934754, 0.934208, 0.933624, 0.932952, 0.932249, 0.931452, 0.930682, 0.929997, 0.929443, 0.92897, 0.92856, 0.928157, 0.928024],
      'E_o': [0.948473, 0.948992, 0.943674, 0.939655, 0.939324, 0.93916, 0.939345, 0.939859, 0.939359, 0.940624, 0.938963, 0.924303, 0.923241, 0.925047, 0.92574, 0.926341, 0.925772, 0.926244, 0.926664, 0.926658, 0.927363, 0.92828, 0.927682, 0.927952, 0.927617, 0.928124, 0.928719, 0.928538, 0.928098, 0.926674, 0.925287, 0.924726, 0.92563, 0.926713, 0.927935, 0.92945, 0.930559, 0.931565, 0.932174, 0.932774, 0.93355, 0.934423, 0.935302, 0.935898, 0.936275, 0.936764, 0.937221, 0.93783, 0.938423, 0.938897, 0.939377, 0.940458, 0.941178, 0.941404, 0.941867, 0.94149, 0.941854, 0.942517, 0.943121, 0.943501, 0.943051, 0.943575, 0.944207, 0.944715, 0.945526, 0.946504, 0.94741, 0.948468, 0.94958, 0.950614, 0.951287, 0.952014, 0.952648, 0.953439, 0.95411, 0.954635, 0.955198, 0.955825, 0.956519, 0.957012, 0.957597, 0.958158, 0.958424, 0.958959, 0.959415, 0.95991, 0.960461, 0.960993, 0.961489, 0.961978, 0.962489, 0.962949, 0.963314, 0.963767, 0.964155, 0.964432, 0.964698, 0.96509, 0.965413, 0.965744, 0.966013, 0.966294, 0.966505, 0.966714, 0.966955, 0.967204, 0.967489, 0.967754, 0.968027, 0.968351, 0.968563, 0.9688, 0.969081, 0.969419, 0.969771, 0.970193, 0.970617, 0.971042, 0.971453, 0.971888, 0.972189],
      'E_a': [0.89936, 0.899118, 0.892849, 0.888181, 0.887459, 0.886897, 0.887007, 0.887216, 0.886364, 0.887439, 0.885411, 0.869972, 0.868497, 0.87004, 0.870484, 0.870877, 0.870119, 0.870485, 0.870734, 0.870625, 0.871197, 0.871829, 0.870909, 0.870954, 0.870475, 0.870702, 0.870815, 0.870234, 0.869413, 0.867355, 0.865597, 0.864793, 0.865584, 0.86657, 0.868032, 0.869677, 0.870861, 0.871851, 0.872548, 0.873125, 0.873897, 0.874809, 0.875724, 0.876403, 0.876832, 0.877431, 0.878017, 0.878742, 0.879439, 0.879957, 0.880493, 0.881643, 0.882354, 0.88259, 0.883051, 0.88255, 0.882826, 0.883383, 0.883924, 0.884112, 0.883355, 0.883717, 0.884226, 0.884659, 0.885285, 0.886034, 0.886661, 0.88747, 0.888329, 0.889088, 0.889286, 0.889593, 0.889807, 0.890234, 0.890591, 0.890829, 0.891066, 0.891485, 0.891988, 0.892224, 0.892606, 0.892974, 0.893101, 0.893521, 0.893877, 0.894265, 0.894682, 0.89505, 0.895388, 0.895732, 0.896121, 0.896507, 0.89675, 0.897072, 0.897337, 0.897506, 0.897665, 0.897975, 0.898197, 0.898433, 0.89857, 0.898726, 0.898789, 0.898879, 0.898948, 0.899031, 0.899086, 0.899109, 0.899079, 0.899045, 0.898837, 0.898613, 0.898423, 0.898193, 0.898002, 0.897946, 0.898033, 0.898204, 0.898376, 0.898475, 0.898665],
      'e_i': [10.0642, 10.1355, 10.2475, 10.3416, 10.4133, 10.4844, 10.5566, 10.6255, 10.6978, 10.7617, 10.8369, 10.9488, 11.0197, 11.0883, 11.1538, 11.1973, 11.24, 11.2763, 11.3079, 11.3499, 11.3968, 11.4499, 11.5163, 11.5793, 11.6469, 11.7174, 11.7907, 11.8673, 11.9428, 12.0153, 12.0889, 12.1599, 12.2307, 12.2922, 12.3494, 12.4049, 12.4608, 12.5149, 12.5722, 12.6284, 12.673, 12.7165, 12.7519, 12.7853, 12.815, 12.8408, 12.8702, 12.9049, 12.9469, 12.9942, 13.0448, 13.0956, 13.1466, 13.2023, 13.2578, 13.3136, 13.365, 13.4156, 13.4691, 13.5227, 13.5804, 13.6347, 13.6902, 13.7492, 13.8049, 13.8616, 13.9198, 13.9806, 14.0408, 14.0994, 14.1623, 14.2235, 14.285, 14.3446, 14.4019, 14.4591, 14.5165, 14.5735, 14.6285, 14.6831, 14.7381, 14.7931, 14.8474, 14.9015, 14.9559, 15.0085, 15.0607, 15.1129, 15.1651, 15.217, 15.2691, 15.3217, 15.3725, 15.4221, 15.4726, 15.5238, 15.5744, 15.6244, 15.6748, 15.7249, 15.7765, 15.8274, 15.8791, 15.9307, 15.9826, 16.0357, 16.0889, 16.1416, 16.1948, 16.2482, 16.299, 16.3488, 16.3978, 16.4459, 16.4932, 16.5377, 16.5787, 16.6186, 16.6545, 16.6959, 16.7237],
      'e_o': [9.3052, 9.3837, 9.4085, 9.442, 9.5088, 9.5761, 9.6473, 9.7209, 9.7826, 9.8625, 9.9059, 9.8143, 9.864, 9.948, 10.0128, 10.0561, 10.0847, 10.1209, 10.1563, 10.1917, 10.2429, 10.3037, 10.3562, 10.4237, 10.4887, 10.5647, 10.6448, 10.7153, 10.7829, 10.8373, 10.8945, 10.9603, 11.0441, 11.1277, 11.2067, 11.2893, 11.3667, 11.4413, 11.509, 11.5751, 11.6343, 11.6916, 11.7439, 11.7874, 11.8229, 11.8568, 11.8946, 11.9407, 11.9936, 12.0514, 12.1159, 12.1907, 12.2623, 12.3327, 12.4026, 12.4633, 12.5335, 12.6078, 12.6852, 12.7602, 12.826, 12.9052, 12.9881, 13.0713, 13.1616, 13.2571, 13.3529, 13.4536, 13.5545, 13.6531, 13.7533, 13.8521, 13.9497, 14.0458, 14.1346, 14.2186, 14.301, 14.3833, 14.4655, 14.5432, 14.6227, 14.7005, 14.7712, 14.8456, 14.9186, 14.9907, 15.0629, 15.1352, 15.2082, 15.2805, 15.3528, 15.4232, 15.491, 15.5576, 15.6224, 15.6857, 15.7487, 15.8148, 15.8805, 15.9463, 16.0126, 16.0791, 16.1458, 16.2136, 16.2839, 16.3569, 16.4338, 16.5109, 16.5885, 16.6683, 16.7454, 16.8231, 16.9012, 16.9809, 17.0587, 17.1319, 17.1976, 17.2576, 17.3086, 17.363, 17.3969],
      'e_a': [10.1575, 10.2277, 10.295, 10.3566, 10.4227, 10.4887, 10.5579, 10.6256, 10.6915, 10.7614, 10.821, 10.8349, 10.8935, 10.9691, 11.0345, 11.0782, 11.1131, 11.1498, 11.1838, 11.2232, 11.2734, 11.3305, 11.3901, 11.4554, 11.5214, 11.5937, 11.6698, 11.7427, 11.8142, 11.8773, 11.9415, 12.0091, 12.0848, 12.1555, 12.2221, 12.2889, 12.3529, 12.4148, 12.475, 12.5336, 12.5836, 12.6323, 12.6746, 12.7119, 12.7437, 12.7732, 12.8064, 12.8463, 12.8936, 12.9455, 13.0028, 13.0648, 13.1252, 13.187, 13.2482, 13.3053, 13.3651, 13.4263, 13.4908, 13.5541, 13.6146, 13.6801, 13.7478, 13.8175, 13.8888, 13.963, 14.0379, 14.1166, 14.1947, 14.2709, 14.3501, 14.428, 14.5054, 14.5808, 14.6518, 14.7203, 14.7881, 14.8558, 14.9225, 14.9866, 15.0521, 15.1167, 15.1777, 15.2402, 15.3025, 15.3635, 15.4244, 15.4854, 15.547, 15.6082, 15.6694, 15.7299, 15.7884, 15.8455, 15.9024, 15.9592, 16.0156, 16.0732, 16.1302, 16.1867, 16.2436, 16.3, 16.3567, 16.414, 16.4726, 16.5332, 16.5959, 16.6588, 16.7224, 16.7872, 16.8499, 16.9129, 16.9756, 17.0387, 17.1004, 17.1579, 17.2095, 17.257, 17.298, 17.343, 17.372],
      's_i': [30328, 32851, 36983, 40894, 44217, 47794, 51605, 55580, 60155, 64462, 69744, 78240, 84458, 90932, 97566, 102162, 106803, 110944, 114829, 120010, 126253, 133797, 143739, 154113, 165929, 179337, 195016, 212366, 231164, 251383, 273289, 296034, 320112, 343344, 365330, 388432, 413312, 439120, 467390, 497103, 522270, 547577, 569437, 590206, 609430, 626293, 646001, 670518, 701449, 739009, 782351, 828600, 878492, 936126, 996804, 1063883, 1130428, 1201100, 1279642, 1365629, 1464306, 1564300, 1672888, 1794918, 1923552, 2065609, 2222143, 2395638, 2580520, 2775110, 3002398, 3241711, 3499493, 3766387, 4040746, 4330727, 4644141, 4970414, 5307356, 5667472, 6051801, 6460285, 6887353, 7335604, 7814229, 8307887, 8830711, 9389522, 9982276, 10611325, 11277826, 11987189, 12726553, 13487236, 14298035, 15168966, 16087034, 17052139, 18084655, 19180696, 20366234, 21599987, 22932459, 24349452, 25878795, 27545797, 29360839, 31306119, 33438118, 35765209, 38178443, 40781455, 43554166, 46557530, 49705617, 52827304, 55797716, 58777511, 61579422, 64891312, 67037207],
      's_o': [18228, 19694, 21377, 23118, 24910, 26808, 28861, 31037, 33327, 35777, 38171, 40866, 43656, 46819, 49811, 51830, 53814, 55649, 57530, 59775, 62642, 66156, 70511, 75585, 81401, 87803, 95017, 102741, 111110, 119951, 129856, 140433, 151970, 164014, 175787, 188380, 201776, 215735, 230132, 245076, 258442, 271604, 283870, 295005, 304857, 314013, 324926, 338494, 355257, 375384, 399434, 426138, 455281, 489100, 523400, 561205, 601551, 644825, 694002, 747368, 806562, 870586, 941816, 1020938, 1110004, 1210309, 1321285, 1446357, 1582013, 1727880, 1900388, 2085077, 2287754, 2499794, 2715365, 2941056, 3177987, 3429935, 3697142, 3978674, 4283159, 4604073, 4935522, 5288012, 5664258, 6057273, 6472001, 6917397, 7402548, 7916444, 8462371, 9035199, 9635349, 10246954, 10888389, 11573028, 12298795, 13083460, 13928315, 14826632, 15807164, 16851671, 17990335, 19227788, 20591539, 22109609, 23819867, 25675598, 27685026, 29891156, 32246081, 34791541, 37521869, 40490366, 43594585, 46652771, 49536038, 52286057, 54692161, 57381177, 59089886],
      's_a': [41038, 44239, 48987, 53521, 57613, 61964, 66642, 71522, 77038, 82496, 88824, 97920, 105094, 112991, 120881, 126388, 131746, 136740, 141605, 147788, 155434, 164624, 176373, 189075, 203460, 219522, 237971, 258145, 280026, 303311, 328381, 354800, 382938, 410579, 436962, 464563, 493801, 524303, 556674, 590460, 619778, 649045, 675026, 699349, 721460, 741627, 765411, 794886, 832146, 876420, 928234, 984006, 1044321, 1113439, 1184576, 1262885, 1343215, 1428026, 1523630, 1627435, 1744467, 1865433, 1997358, 2144227, 2302590, 2478004, 2670907, 2886546, 3116308, 3359748, 3648374, 3953109, 4283861, 4625097, 4972710, 5336942, 5723588, 6129062, 6551912, 6998692, 7478590, 7984387, 8507588, 9058866, 9648305, 10259248, 10904925, 11596645, 12342654, 13130166, 13962734, 14837023, 15750548, 16684719, 17678315, 18743417, 19865771, 21055824, 22318789, 23641849, 25073957, 26574624, 28195411, 29926895, 31813934, 33887090, 36183361, 38653999, 41342153, 44274866, 47381390, 50730036, 54282848, 58130333, 62137986, 66052125, 69689828, 73156083, 76269981, 79902264, 82242347]
    }
    // 队列 初始化
    this.getData()
  },
  methods: {
    // get subject data by key
    filrerSubjectData(key) {
      const rets = []
      for (const subjectKey of this.option.subject.select) {
        rets.push([subjectKey, MAGSubjectEntropyObject[subjectKey][key]])
      }
      rets.sort((a, b) => b[1].slice(-1) - a[1].slice(-1))
      return rets
    },

    getData: _.debounce(async function() {
      if (this.option.subject.select.length < 1) {
        return false
      }
      this.loading = true

      console.log('this.option.subject', this.option.subject.select)

      const xData = []
      for (const year of _.range(1900, 2021, 1)) {
        xData.push(year)
      }

      // 标准结构熵
      let _opt = extendEchartsOpts({
        title: {
          text: `标准结构熵`
        },
        xAxis: {
          name: 'Year',
          type: 'category',
          boundaryGap: false,
          data: xData
        },
        yAxis: {
          name: 'Entropy',
          type: 'value',
          axisLabel: {
            formatter: value => formatNum(value)
          },
          min: function(value) {
            return Math.floor(value.min * 10) / 10
          }
        },
        series: this.filrerSubjectData(`E_${this.option.type.select}`).map(item => {
          return extendLineSeries({
            name: item[0],
            type: 'line',
            smooth: false,
            data: item[1]
          })
        })
      })
      this.myChartObjs[0].setOption(_opt, true)

      // 结构熵
      _opt = extendEchartsOpts({
        title: {
          text: `绝对值结构熵`
        },
        xAxis: {
          name: 'Year',
          type: 'category',
          boundaryGap: false,
          data: xData
        },
        yAxis: {
          name: 'Entropy',
          type: 'value',
          axisLabel: {
            formatter: value => formatNum(value)
          },
          min: function(value) {
            return Math.floor(value.min * 10) / 10
          }
        },
        series: this.filrerSubjectData(`e_${this.option.type.select}`).map(item => {
          return extendLineSeries({
            name: item[0],
            type: 'line',
            smooth: false,
            data: item[1]
          })
        })
      })
      this.myChartObjs[1].setOption(_opt, true)

      // 有向网络密度
      _opt = extendEchartsOpts({
        title: {
          text: `度分布熵`
        },
        xAxis: {
          name: 'Year',
          type: 'category',
          boundaryGap: false,
          data: xData
        },
        yAxis: {
          name: 'Entropy',
          type: 'value',
          axisLabel: {
            formatter: value => formatNum(value)
          },
          min: function(value) {
            return Math.floor(value.min * 10) / 10
          }
        },
        series: this.filrerSubjectData(`d_${this.option.type.select}`).map(item => {
          return extendLineSeries({
            name: item[0],
            type: 'line',
            smooth: false,
            data: item[1]
          })
        })
      })
      this.myChartObjs[2].setOption(_opt, true)

      // 无向网络密度
      _opt = extendEchartsOpts({
        title: {
          text: `网络大小`
        },
        xAxis: {
          name: 'Year',
          type: 'category',
          boundaryGap: false,
          data: xData
        },
        yAxis: {
          name: 'Count',
          type: 'value',
          axisLabel: {
            formatter: value => formatNum(value)
          },
          min: function(value) {
            return Math.floor(value.min * 10) / 10
          }
        },
        series: this.filrerSubjectData(`s_${this.option.type.select}`).map(item => {
          return extendLineSeries({
            name: item[0],
            type: 'line',
            smooth: false,
            data: item[1]
          })
        })
      })
      this.myChartObjs[3].setOption(_opt, true)

      this.loading = false
    }, 2000)
  }
}
</script>

<style lang="less" scoped></style>
